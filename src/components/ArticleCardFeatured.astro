---
import { CATEGORY_LABELS, CATEGORY_GRADIENTS } from "../constants/labels";
import type { Lang } from "../constants/labels";
import { formatDate } from "../utils/date";

interface Props {
  href: string;
  title: string;
  date: Date;
  category?: string;
  image?: string;
  lang?: "en" | "ua";
}

const { href, title, date, category, image, lang = "en" } = Astro.props;

const gradient = (category && CATEGORY_GRADIENTS[category as keyof typeof CATEGORY_GRADIENTS]) ?? "from-gray-300 to-gray-400";
---

<a href={href} class="group block">
  <div class="aspect-video rounded-xl overflow-hidden mb-3 bg-surface">
    {image ? (
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
        loading="lazy"
      />
    ) : (
      <div class={`w-full h-full bg-gradient-to-br ${gradient}`}></div>
    )}
  </div>

  <div class="flex items-center gap-2 mb-1">
    {category && (
      <span class="text-xs font-semibold uppercase tracking-wider text-accent">
        {(CATEGORY_LABELS[category as keyof typeof CATEGORY_LABELS]?.[lang as Lang]) ?? category}
      </span>
    )}
    <time class="text-xs text-gray-400" datetime={date.toISOString()}>
      {formatDate(date, lang as Lang)}
    </time>
  </div>

  <h3 class="font-bold text-gray-900 leading-snug group-hover:text-accent transition-colors">
    {title}
  </h3>
</a>
