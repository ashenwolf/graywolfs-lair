---
title: "–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∞ plugin-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ python"
date: 2007-12-20
tags: ["itblog-ua", "software-engineering"]
lang: ua
category: software-engineering
---

–¢–∞–∫ –≤–∂–µ –≤–∏–π—à–ª–æ, —â–æ –º–µ–Ω—ñ –≤–¥—Ä—É–≥–µ –¥–æ–≤–µ–ª–æ—Å—è –ø–∏—Å–∞—Ç–∏ –º–æ–¥—É–ª—å–Ω—É —Å–∏—Å—Ç–µ–º—É –Ω–∞ –ø—ñ—Ç–æ–Ω—ñ. –ü—Ä–∏—á–æ–º—É –≤–¥—Ä—É–≥–µ –¥–æ–≤–µ–ª–æ—Å—è –π—Ç–∏ –ø–æ –æ–¥–Ω–∏—Ö —ñ —Ç–∏—Ö —Å–∞–º–∏—Ö –≥—Ä–∞–±–ª—è—Ö, –±–æ –ø—Ä–∏–∫–ª–∞–¥ –º–∏–Ω—É–ª–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–∞–ª–∏—à–∏–≤—Å—è –Ω–∞ –Ω–æ—É—Ç—ñ, —è–∫–∏–π –∑–∞—Ä–∞–∑ –ª–µ–∂–∏—Ç—å –≤ —Å–µ—Ä–≤—ñ—Å–Ω–æ–º—É —Ü–µ–Ω—Ç—Ä—ñ. –®–ª—è—Ö –Ω–∏–∂—á–µ –Ω–µ —è–≤–ª—è—î—Ç—å—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–º —á–∏ —Ç–∞–º –Ω–∞–π–∫—Ä–∞—â–∏–º, –∞–ª–µ –≥–æ–ª–æ–≤–Ω–µ, —â–æ –≤—ñ–Ω 100% —Ä–æ–±–æ—á–∏–π —ñ –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—î –º–æ—ó–º –ø–æ—Ç—Ä–µ–±–∞–º üôÇ –ê –ø–æ—Ç—Ä–µ–±–∏ –ø–æ–ª—è–≥–∞—é—Ç—å –≤ —Ç–æ–º—É, —â–æ –∫–æ–∂–µ–Ω –ø–ª–∞–≥—ñ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Å–æ–±–æ—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∫–ª–∞—Å—É –∑ –ø–µ–≤–Ω–∏–º –Ω–∞–±–æ—Ä–æ–º —Ñ—É–Ω–∫—Ü—ñ–π —Ç–∞ –º–∞—î –∑–∞—Å—ñ–± –¥–ª—è —ñ–Ω—Å—Ç–∞–Ω—Ü—ñ—é–≤–∞–Ω–Ω—è –æ–±‚Äô—î–∫—Ç—É —Ü—å–æ–≥–æ –∫–ª–∞—Å—É –Ω–µ –∑–Ω–∞—é—á–∏ –π–æ–≥–æ —ñ–º–µ–Ω—ñ. –û—Ç–æ–∂‚Ä¶

–î–ª—è –ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä–∏–º–æ –ø—Ä–∏–±–ª–∏–∑–Ω–æ –Ω–∞—Å—Ç—É–ø–Ω—É —Å–∏—Å—Ç–µ–º—É –ø—ñ–¥–∫–∞—Ç–∞–ª–æ–≥—ñ–≤ –∑ —Ñ–∞–π–ª–∞–º–∏, –∞ –ø–æ—Ç—ñ–º –ø–æ—á–Ω–µ–º–æ —ó—ó –Ω–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏:

```
+ / plugins
| + / plugin1
| | - __init__.py
| + / plugin2
| | - __init__.py
| | - __init__.py
| - pluginmanager.py
```

–Ø–∫ –Ω–µ–≤–∞–∂–∫–æ –∑–¥–æ–≥–∞–¥–∞—Ç–∏—Å—å, –º–æ–¥—É–ª—å _[plugingmanager.py](http://plugingmanager.py)_ ‚Äì –±—É–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∑–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω—ñ–≤. –ü–∞–ø–∫–∞ _plugins_ –º—ñ—Å—Ç–∏—Ç–∏–º–µ –≤–ª–∞—Å–Ω–µ –ø–ª–∞–≥—ñ–Ω–∏ (–∫–æ–∂–µ–Ω –∑ —è–∫–∏—Ö –±—É–¥–µ –∑–∞–π–º–∞—Ç–∏ –æ–∫—Ä–µ–º–∏–π –∫–∞—Ç–∞–ª–æ–≥) —Ç–∞ —Ñ–∞–π–ª —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø–∞–∫–µ—Ç—É ‚Äúplugins‚Äù (—Ñ–∞–π–ª _**init**.py_) ‚Äì –π–æ–≥–æ –º–æ–∂–Ω–∞ –ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–∞–¥–ø–∞–∫–µ—Ç _plugins_ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.

```
#!/usr/bin/python
import os
import os.path

plugins = []

def LoadModule(module):
  # build package name
  packagename = "plugins." + module
  # using built-in function __import__() to dynamically load modules;
  # ensure that # directory containing "plugins" folder exists in
  # python's sys.path list. if not, it can be specified by
  # sys.path.append(path_to_plugins) command before calling __import__()
  mod = __import__(packagename, globals(), locals(), [])
  # if module import was successful
  if ( mod ):
    # try to get the plugin module itself
    components = packagename.split('.')
    for component in components[1:]:
      mod = getattr(mod, component)
    # add the instance of plugin-implemented class to the list
    plugins.append(mod.CreateInstance()) 

# dynamicaly load plugin packages      
def LoadPlugins(pluginpath):
  # enum plugins directory
  for dir in os.listdir(os.path.join(pluginpath, 'plugins')):
    # for each non-hidden file or directory
      if (dir[0] != "_") and (dir.endswith (".py")):
        # try to load corresponding plugin
        LoadModule(dir)

LoadPlugins(".")
for plugin in plugins:
  plugin.Say("Joey")
```

–°–ø–æ–¥—ñ–≤–∞—é—Å—å, –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑—Ä–æ–∑—É–º—ñ–ª—ñ (—Ö–æ—á —ñ –∞–Ω–≥–ª–æ–º–æ–≤–Ω—ñ üôÇ ). –û—Ç–æ–∂, –º–∏ –ø–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –ø–∞–ø–∫—É –∑ –ø–ª–∞–≥—ñ–Ω–∞–º–∏ —ñ –¥–ª—è –∫–æ–∂–æ–≥–æ —Ñ–∞–π–ª—É (—Ç–æ–±—Ç–æ –≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –∫–∞—Ç–∞–ª–æ–≥—É) –Ω–∞–º–∞–≥–∞—î–º–æ—Å—å —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ –ø–æ —ñ–º–µ–Ω—ñ. –í –ø—ñ—Ç–æ–Ω—ñ –∑–∞–≤–¥—è–∫–∏ –≤–∏—â–µ–Ω–∞–≤–µ–¥–µ–Ω—ñ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –±—É–¥—É—î—Ç—å—Å—è –¥–µ—Ä–µ–≤–æ –ø–∞–∫–µ—Ç—ñ–≤. –¢–æ–±—Ç–æ –≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É —É –Ω–∞—Å —î –ø–∞–∫–µ—Ç –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è _plugins_, —è–∫–∏–π –º–∞—î –¥–≤–∞ –ø—ñ–¥–ø–∞–∫–µ—Ç–∏: _plugins.plugin1_ —Ç–∞ _plugins.plugin2_. –î–ª—è —ñ–º–ø–æ—Ä—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤–±—É–¥–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è **import**(). –í–æ–Ω–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –∫–ª–∞—Å –º–æ–¥—É–ª—è –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è (–≤ –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É ‚Äì ‚Äúplugins‚Äù), –∞–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥—ñ–π—Ç–∏ –¥–æ –ø–∞–∫–µ—Ç–∞ –Ω–∏–∂–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è –º–∏ ‚Äú–∑–∞–Ω—É—Ä—é—î–º–æ—Å—å‚Äù –¥–∞–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é attrib. –í –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É, –∑–≤—ñ—Å–Ω–æ, –º–æ–∂–Ω–∞ –±—É–ª–æ –∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—à–µ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∫–ª–∞–¥–µ–Ω—ñ—Å—Ç—å —Ç—É—Ç –º–∞—î –ª–∏—à–µ –æ–¥–∏–Ω —Ä—ñ–≤–µ–Ω—å —ñ –Ω–∞–∑–≤–∞ –ø–∞–∫–µ—Ç—É –±—É–¥—É—î—Ç—å—Å—è –≤ —Ü—ñ–π –∂–µ —Ñ—É–Ω–∫—Ü—ñ—ó, –∞–ª–µ –∫–æ–¥ —è —Ç—Ä–æ—Ö–∏ —É—Å–∫–ª–∞–¥–Ω–∏–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ, —â–æ–± –¥–∞—Ç–∏ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω—É —Ç–∞ –≥–Ω—É—á–∫—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤ —á–∏ –º–æ–¥—É–ª—ñ–≤.

–û—Ç—Ä–∏–º–∞–≤—à–∏ –∫–ª–∞—Å –º–æ–¥—É–ª—è –º–∏ –≤–∏–∫–ª–∏–∫–∞—î–º–æ –π–æ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é _CreateInstance()_, —â–æ –ø–æ–≤–µ—Ä–Ω–µ –Ω–∞–º –µ–∫–∑–µ–º–ø–ª—è—Ä —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –≤ –º–æ–¥—É–ª—ñ –∫–ª–∞—Å—É.

–¢–µ–ø–µ—Ä —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –≤–ª–∞—Å–Ω–µ –ø–ª–∞–≥—ñ–Ω—ñ–≤. –î–ª—è –Ω–µ—Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –º–∏ –º–æ–∂–µ–º–æ –∑–∞–ø–∏—Ö–Ω—É—Ç–∏ —ó—ó –ø—Ä—è–º–æ –≤ –æ–ø–∏—Å –ø–∞–∫–µ—Ç—É plugin1 ‚Äì —Ñ–∞–π–ª _**init**.py_:

```
#!/usr/bin/python
class Plugin1():
  def Say(self, name):
    print "Hello, %s!" % name
  def CreateInstance():
    return Plugin1()
```

–ü–æ –∞–Ω–∞–ª–æ–≥—ñ—ó –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é plugin2. –¢–µ–ø–µ—Ä –∑–∞–ø—É—Å—Ç–∏–≤—à–∏ –ø—Ä–æ–≥—Ä–∞–º—É –æ—Ç—Ä–∏–º–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```
$ ./pluginmanager.py
Hello, Joey!
Konnichiwa, Joey!
```

–ù–∞–±—ñ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø–ª–∞–≥—ñ–Ω—ñ–≤ –º–æ–∂–Ω–∞ —Ç–µ–ø–µ—Ä –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞—é—á–∏ –ø–æ –∞–Ω–∞–ª–æ–≥—ñ—ó —ñ–Ω—à—ñ –ø—ñ–¥–∫–∞—Ç–∞–ª–æ–≥–∏-–ø–∞–∫–µ—Ç–∏. –ó–≤—ñ—Å–Ω–æ, –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ä–æ–±–∏—Ç–∏ —Ü–µ –≤—Å–µ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –º–æ–¥—É–ª—ñ–≤, –∞ –Ω–µ –ø–∞–∫–µ—Ç—ñ–≤ (—á–∏ –Ω–µ –ª–∏—à–µ –ø–∞–∫–µ—Ç—ñ–≤), –∞–ª–µ –º–µ–Ω—ñ –≤—Å–µ –∂ —Ç–∞–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è –±—ñ–ª—å—à–µ.
