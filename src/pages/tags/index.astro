---
import Base from "../../layouts/Base.astro";
import { countTags, getSortedTags } from "../../utils/tags";
import { UI } from "../../constants/labels";
import { getArticlesByLang } from "../../utils/collections";

const articles = await getArticlesByLang("en");
const tags = getSortedTags(countTags(articles));
const t = UI.en;
---

<Base title={t.tags} lang="en">
  <div class="container-inner">
    <h1 class="text-3xl font-bold mb-8">{t.tags}</h1>
    {tags.length === 0 && <p class="text-gray-500">{t.noTags}</p>}
    <div class="flex flex-wrap gap-3">
      {tags.map(([tag, count]) => (
        <a href={`/tags/${tag}`} class="bg-gray-100 px-3 py-1 rounded hover:bg-gray-200">
          {tag} <span class="text-gray-500">({count})</span>
        </a>
      ))}
    </div>
  </div>
</Base>
